"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[88],{5162:function(e,t,a){a.d(t,{Z:function(){return o}});var n=a(7294),l=a(4334),r="tabItem_Ymn6";function o(e){let{children:t,hidden:a,className:o}=e;return n.createElement("div",{role:"tabpanel",className:(0,l.Z)(r,o),hidden:a},t)}},5488:function(e,t,a){a.d(t,{Z:function(){return m}});var n=a(3117),l=a(7294),r=a(4334),o=a(2389),i=a(7392),s=a(7094),d=a(2466),p="tabList__CuJ",u="tabItem_LNqP";function c(e){var t;const{lazy:a,block:o,defaultValue:c,values:m,groupId:g,className:f}=e,k=l.Children.map(e.children,(e=>{if((0,l.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),h=m??k.map((e=>{let{props:{value:t,label:a,attributes:n}}=e;return{value:t,label:a,attributes:n}})),N=(0,i.l)(h,((e,t)=>e.value===t.value));if(N.length>0)throw new Error(`Docusaurus error: Duplicate values "${N.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);const b=null===c?c:c??(null==(t=k.find((e=>e.props.default)))?void 0:t.props.value)??k[0].props.value;if(null!==b&&!h.some((e=>e.value===b)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${b}" but none of its children has the corresponding value. Available values are: ${h.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:v,setTabGroupChoices:y}=(0,s.U)(),[_,C]=(0,l.useState)(b),w=[],{blockElementScrollPositionUntilNextRender:O}=(0,d.o5)();if(null!=g){const e=v[g];null!=e&&e!==_&&h.some((t=>t.value===e))&&C(e)}const S=e=>{const t=e.currentTarget,a=w.indexOf(t),n=h[a].value;n!==_&&(O(t),C(n),null!=g&&y(g,String(n)))},T=e=>{var t;let a=null;switch(e.key){case"ArrowRight":{const t=w.indexOf(e.currentTarget)+1;a=w[t]??w[0];break}case"ArrowLeft":{const t=w.indexOf(e.currentTarget)-1;a=w[t]??w[w.length-1];break}}null==(t=a)||t.focus()};return l.createElement("div",{className:(0,r.Z)("tabs-container",p)},l.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":o},f)},h.map((e=>{let{value:t,label:a,attributes:o}=e;return l.createElement("li",(0,n.Z)({role:"tab",tabIndex:_===t?0:-1,"aria-selected":_===t,key:t,ref:e=>w.push(e),onKeyDown:T,onFocus:S,onClick:S},o,{className:(0,r.Z)("tabs__item",u,null==o?void 0:o.className,{"tabs__item--active":_===t})}),a??t)}))),a?(0,l.cloneElement)(k.filter((e=>e.props.value===_))[0],{className:"margin-top--md"}):l.createElement("div",{className:"margin-top--md"},k.map(((e,t)=>(0,l.cloneElement)(e,{key:t,hidden:e.props.value!==_})))))}function m(e){const t=(0,o.Z)();return l.createElement(c,(0,n.Z)({key:String(t)},e))}},5404:function(e,t,a){a.r(t),a.d(t,{assets:function(){return s},contentTitle:function(){return o},default:function(){return u},frontMatter:function(){return r},metadata:function(){return i},toc:function(){return d}});var n=a(3117),l=(a(7294),a(3905));a(5488),a(5162),a(6066);const r={sidebar_position:7,title:"fseval.config.StorageConfig"},o="StorageConfig",i={unversionedId:"config/StorageConfig",id:"config/StorageConfig",title:"fseval.config.StorageConfig",description:"Allows you to define a storage for loading and saving cached estimators, among other",source:"@site/docs/config/StorageConfig.mdx",sourceDirName:"config",slug:"/config/StorageConfig",permalink:"/fseval/docs/config/StorageConfig",draft:!1,editUrl:"https://github.com/dunnkers/fseval/tree/website/docs/config/StorageConfig.mdx",tags:[],version:"current",sidebarPosition:7,frontMatter:{sidebar_position:7,title:"fseval.config.StorageConfig"},sidebar:"tutorialSidebar",previous:{title:"fseval.config.EstimatorConfig",permalink:"/fseval/docs/config/EstimatorConfig"},next:{title:"Metrics",permalink:"/fseval/docs/config/metrics"}},s={},d=[{value:"Available storages",id:"available-storages",level:2},{value:"Local",id:"local",level:3},{value:"Weights and Biases",id:"weights-and-biases",level:3},{value:"Mock",id:"mock",level:3}],p={toc:d};function u(e){let{components:t,...r}=e;return(0,l.kt)("wrapper",(0,n.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"storageconfig"},"StorageConfig"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"class fseval.config.StorageConfig(\n    load_dir: Optional[str]=None,\n    save_dir: Optional[str]=None,\n)\n")),(0,l.kt)("p",null,"Allows you to define a storage for loading and saving cached estimators, among other\nfiles, like the hydra and fseval configuration in YAML."),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Attributes"),":"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null}),(0,l.kt)("th",{parentName:"tr",align:null}))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"load_dir")," : Optional","[str]"),(0,l.kt)("td",{parentName:"tr",align:null},"Defines a path to load files from. Must point to exactly the directory containing the files, i.e. you should not point to a higher-level directory than where the files are. Path can be relative or absolute, but an absolute path is recommended.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"save_dir")," : Optional","[str]"),(0,l.kt)("td",{parentName:"tr",align:null},"The directory to save files to. Can be relative or absolute.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})))),(0,l.kt)("h2",{id:"available-storages"},"Available storages"),(0,l.kt)("h3",{id:"local"},"Local"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"class fseval.config.storage.LocalStorageConfig(\n    load_dir: Optional[str]=None, \n    save_dir: Optional[str]=None,\n)\n")),(0,l.kt)("p",null,"Saves files to a local directory."),(0,l.kt)("p",null,"Assuming your rankers and validators ",(0,l.kt)("inlineCode",{parentName:"p"},"save_cache")," is configured to ",(0,l.kt)("inlineCode",{parentName:"p"},"CacheUsage.allow"),", the fitted estimators will be saved in the local hydra directory. That is, they will be saved as ",(0,l.kt)("inlineCode",{parentName:"p"},".pickle")," files, with an appropriate name. In a different run, you can set ",(0,l.kt)("inlineCode",{parentName:"p"},"load_dir")," to this directory to load the fitted estimators again. Example:"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"local storage example",src:a(3115).Z,width:"320",height:"286"}),"\n",(0,l.kt)("img",{alt:"local storage hydra dir example",src:a(7028).Z,width:"321",height:"286"})),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Attributes"),":"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null}),(0,l.kt)("th",{parentName:"tr",align:null}))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"load_dir")," : str"),(0,l.kt)("td",{parentName:"tr",align:null},"The directory to load files from")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"save_dir")," : str"),(0,l.kt)("td",{parentName:"tr",align:null},"The directory to save files to")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})))),(0,l.kt)("p",null,"Use with ",(0,l.kt)("inlineCode",{parentName:"p"},"storage=local")," on the commandline, or."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'{4} title="conf/my_config.yaml"',"{4}":!0,title:'"conf/my_config.yaml"'},"defaults:\n  - base_pipeline_config\n  - _self_\n  - override storage: local\n")),(0,l.kt)("h3",{id:"weights-and-biases"},"Weights and Biases"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'class fseval.config.storage.WandbStorageConfig(\n    load_dir: Optional[str]=None, \n    save_dir: Optional[str]=None, \n    entity: Optional[str]=None, \n    project: Optional[str]=None, \n    run_id: Optional[str]=None, \n    save_policy: Optional[str]="live",\n)\n')),(0,l.kt)("p",null,"Storage for Weights and Biases (wandb), allowing users to save- and restore files to the service."),(0,l.kt)("p",null,"Like local storage, estimator caches are saved, as well as the entire YAML config of the run. Example:"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"example of wandb storage files",src:a(3163).Z,width:"785",height:"619"})),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Attributes"),":"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null}),(0,l.kt)("th",{parentName:"tr",align:null}))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"load_dir")," : Optional","[str]"),(0,l.kt)("td",{parentName:"tr",align:null},"when set, an attempt is made to load from the designated local directory first, before downloading the data off of wandb. Can be used to perform faster loads or prevent being rate-limited on wandb.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"save_dir")," : Optional","[str]"),(0,l.kt)("td",{parentName:"tr",align:null},"when set, uses this directory to save files, instead of the usual wandb run directory, under the ",(0,l.kt)("inlineCode",{parentName:"td"},"files")," subdirectory.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"entity")," : Optional","[str]"),(0,l.kt)("td",{parentName:"tr",align:null},"allows you to recover from a specific entity, instead of using the entity that is set for the 'current' run.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"project")," : Optional","[str]"),(0,l.kt)("td",{parentName:"tr",align:null},"recover from a specific project.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"run_id")," : Optional","[str]"),(0,l.kt)("td",{parentName:"tr",align:null},"recover from a specific run id.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"save_policy")," : str"),(0,l.kt)("td",{parentName:"tr",align:null},"policy for ",(0,l.kt)("inlineCode",{parentName:"td"},"wandb.save"),". Can be 'live', 'now' or 'end'. Determines at which point of the run the file is uploaded. Defaults to \"live\".")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})))),(0,l.kt)("p",null,"Use with ",(0,l.kt)("inlineCode",{parentName:"p"},"storage=wandb")," on the commandline, or."),(0,l.kt)("p",null,"Alternatively, in your config:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'{4} title="conf/my_config.yaml"',"{4}":!0,title:'"conf/my_config.yaml"'},"defaults:\n  - base_pipeline_config\n  - _self_\n  - override storage: wandb\n")),(0,l.kt)("h3",{id:"mock"},"Mock"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"class fseval.config.storage.MockStorageConfig(\n    load_dir: Optional[str]=None, \n    save_dir: Optional[str]=None,\n)\n")),(0,l.kt)("p",null,"Disables storage."),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Attributes"),":"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null}),(0,l.kt)("th",{parentName:"tr",align:null}))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"load_dir")," : str"),(0,l.kt)("td",{parentName:"tr",align:null},"The directory to load files from")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"save_dir")," : str"),(0,l.kt)("td",{parentName:"tr",align:null},"The directory to save files to")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})))),(0,l.kt)("p",null,"Use with ",(0,l.kt)("inlineCode",{parentName:"p"},"storage=mock")," on the commandline, or."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'{4} title="conf/my_config.yaml"',"{4}":!0,title:'"conf/my_config.yaml"'},"defaults:\n  - base_pipeline_config\n  - _self_\n  - override storage: mock\n")))}u.isMDXComponent=!0},3115:function(e,t,a){t.Z=a.p+"assets/images/local-e427734bc487334cabae582fb14af4a9.png"},7028:function(e,t,a){t.Z=a.p+"assets/images/local_hydra_dir-b9128bce7b90f2a42ba471bf7a77351a.png"},3163:function(e,t,a){t.Z=a.p+"assets/images/wandb-d87a183fb6621fb700756e61ab7f66ba.png"}}]);